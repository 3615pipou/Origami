<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="flat foldable foldability origami calculator validator svg opx fold">
<meta name="author" content="Robby Kraft">
<!-- <link rel="icon" href="../lib/bootstrap/favicon.ico"> -->
<title>Origami Crease Pattern Validator</title>
<link href="../lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="style.css" rel="stylesheet">
<style>
	.success{
		background-color: #007bff;
	}
canvas[resize]{
	width:45vmax;
	height:45vmax;
}
</style>
</head>
<body>

	<div class="site-wrapper">
	  <div class="site-wrapper-inner">
		<div class="cover-container">
		  <div class="masthead clearfix">
			<div class="inner">
<!--               <h3 class="masthead-brand">Cover</h3> -->
			  <nav class="nav nav-masthead">
				<a class="nav-link active" href="#">Info</a>
				<a class="nav-link" href="http://github.com/robbykraft/Origami">Code</a>
			  </nav>
			</div>
		  </div>

		  <div class="inner cover">
			<h1 class="cover-heading">Crease Pattern Validator</h1>
			<p class="lead">Drag and drop file (.svg, <del>.opx</del>, <del>.fold</del>)</p>
			<p class="lead">
			  <a href="#" class="btn btn-lg btn-secondary" id="open-file">Open File</a>
			</p>
			<p class="lead">Flat-foldability check and simulation of folded state</p>
		  </div>

<!-- 		  <div class="mastfoot">
			<div class="inner">
			  <p>Made by <a href="https://twitter.com/robbykraft">@robbykraft</a></p>
			</div>
		  </div>
 -->		  
		</div>
	  </div>

	</div>
			  <input type="file" id="files">

	<div class="container">
		<div class="jumbotron success">
		<h1>Valid</h1>
		<p>crease pattern is flat-foldable</p>
		</div>
	</div>

	<div>
		<canvas id="canvas1" resize></canvas><canvas id="canvas2" resize></canvas>

	</div>

<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script>
window.jQuery || document.write('<script src="../lib/bootstrap/assets/js/vendor/jquery.min.js"><\/script>')
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>


<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../lib/bootstrap/assets/js/ie10-viewport-bug-workaround.js"></script>


<script language="javascript" type="text/javascript" src="../lib/jquery-3.1.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../lib/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../src/graph.js"></script>
<script language="javascript" type="text/javascript" src="../src/planarGraph.js"></script>
<script language="javascript" type="text/javascript" src="../src/creasePattern.js"></script>
<script language="javascript" type="text/javascript" src="../lib/paper-full.min.js"></script>
<script language="javascript" type="text/javascript" src="../src/cp.paperjs.js"></script>

<script>

var project = new OrigamiPaper("canvas1", new CreasePattern().birdBase());
var project = new OrigamiPaper("canvas2", new CreasePattern().fishBase());

</script>

<script>

$("#files").css('opacity','0');

$("#open-file").click(function(e){
   e.preventDefault();
   $("#files").trigger('click');
});

</script>


<script>


$(document).on('change', ':file', function() {
	console.log('document on change file');
	var input = $(this),
		numFiles = input.get(0).files ? input.get(0).files.length : 1,
		label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
	input.trigger('fileselect', [numFiles, label]);
	readBlob();
});

function readBlob() {
	console.log('read blob');
	var files = document.getElementById('files').files;
	if (!files.length) {
		// they selected cancel
		return;
	}
	var file = files[0];
	var reader = new FileReader();

	reader.onloadend = function(evt) {
		console.log('on load end');
		if (evt.target.readyState == FileReader.DONE) { // DONE == 2
			//byte range: ['Read ', file.size, ' byte file'].join('');
			// importSVG(evt.target.result);
			console.log(evt.target.result);
		}
	};
	var blob = file.slice(0, file.size);
	reader.readAsBinaryString(blob);
}
	

</script>
</body>
</html>
