<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
html, body {
	/*margin: 0;*/
/*	overflow: hidden;
	height: 100%; */
	font-family: sans-serif;
}
canvas[resize] {
	width: 100vh;
	height: 100vh;
}
.center{
	text-align: center;
}
</style>
<script type="text/javascript" src="../../lib/paper-full.min.js"></script>
<script type="text/javascript" src="../../src/graph.js"></script>
<script type="text/javascript" src="../../src/planarGraph.js"></script>
<script type="text/javascript" src="../../src/creasePattern.js"></script>
<script type="text/javascript" src="../../src/cp.paperjs.js"></script>
<script type="text/javascript">

window.onload = function() {

	var canvas = [
		document.getElementById('canvas-axiom-1'),
		document.getElementById('canvas1'),
		document.getElementById('canvas2'),
		document.getElementById('canvas3'),
		document.getElementById('canvas4'),
		document.getElementById('canvas5'),
		document.getElementById('canvas6')
	];

	var scopes = [];

	var cp = [];
	var paperCP = [];
	for(var i = 0; i < 7; i++){
		cp.push(new CreasePattern());
	}

	// Axiom 1
	scopes.push( new paper.PaperScope() );
	scopes[0].setup(canvas[0])
	paperCP.push( new OrigamiPaper(scopes[0], cp[0]) );
	zoomView(scopes[0]);

	var axiom1Selected = undefined;
	var decorationLayer = new scopes[0].Layer();
	decorationLayer.activate();
	var axiom1Mark1 = new scopes[0].Shape.Circle({
		center: [0.0, 0.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom1Mark2 = new scopes[0].Shape.Circle({
		center: [1.0, 1.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});

	cp[0].creaseConnectingPoints(axiom1Mark1.position, axiom1Mark2.position).valley();
	paperCP[0].initialize();

	// paper.view.onFrame = function(event) { }
	scopes[0].view.onResize = function(event) {
		paper = scopes[0];
		zoomView(scopes[0]);
	}
	scopes[0].view.onMouseMove = function(event) {
		mousePos = event.point;
		if(axiom1Selected != undefined){
			axiom1Selected.position = mousePos;
			cp[0].clear();
			cp[0].creaseConnectingPoints(axiom1Mark1.position, axiom1Mark2.position).valley();
			paperCP[0].initialize();
		}
	}
	scopes[0].view.onMouseDown = function(event){
		paper = scopes[0];
		var eps = 0.02;
		mousePos = event.point;
		if(mousePos.x - eps < axiom1Mark1.position.x && mousePos.x + eps > axiom1Mark1.position.x && 
		   mousePos.y - eps < axiom1Mark1.position.y && mousePos.y + eps > axiom1Mark1.position.y){
		   	axiom1Selected = axiom1Mark1;
		}
		else if(mousePos.x - eps < axiom1Mark2.position.x && mousePos.x + eps > axiom1Mark2.position.x && 
		        mousePos.y - eps < axiom1Mark2.position.y && mousePos.y + eps > axiom1Mark2.position.y){
		   	axiom1Selected = axiom1Mark2;
		}
		else{ axiom1Selected = undefined; }
	}
	scopes[0].view.onMouseUp = function(event){
		axiom1Selected = undefined;
	}


	// Axiom 2
	scopes.push( new paper.PaperScope() );
	scopes[1].setup(canvas[1])
	paperCP.push( new OrigamiPaper(scopes[1], cp[1]) );
	zoomView(scopes[1]);

	var axiom2Selected = undefined;
	var decorationLayer = new scopes[1].Layer();
	decorationLayer.activate();
	var axiom2Mark1 = new scopes[1].Shape.Circle({
		center: [0.0, 0.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom2Mark2 = new scopes[1].Shape.Circle({
		center: [1.0, 1.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});

	cp[1].creasePointToPoint(axiom2Mark1.position, axiom2Mark2.position).valley();
	paperCP[1].initialize();

	// paper.view.onFrame = function(event) { }
	scopes[1].view.onResize = function(event) {
		paper = scopes[1];
		zoomView(scopes[1]);
	}
	scopes[1].view.onMouseMove = function(event) {
		mousePos = event.point;
		if(axiom2Selected != undefined){
			axiom2Selected.position = mousePos;
			cp[1].clear();
			cp[1].creasePointToPoint(axiom2Mark1.position, axiom2Mark2.position).valley();
			paperCP[1].initialize();
		}
	}
	scopes[1].view.onMouseDown = function(event){
		paper = scopes[1];
		var eps = 0.02;
		mousePos = event.point;
		if(mousePos.x - eps < axiom2Mark1.position.x && mousePos.x + eps > axiom2Mark1.position.x && 
		   mousePos.y - eps < axiom2Mark1.position.y && mousePos.y + eps > axiom2Mark1.position.y){
		   	axiom2Selected = axiom2Mark1;
		}
		else if(mousePos.x - eps < axiom2Mark2.position.x && mousePos.x + eps > axiom2Mark2.position.x && 
		        mousePos.y - eps < axiom2Mark2.position.y && mousePos.y + eps > axiom2Mark2.position.y){
		   	axiom2Selected = axiom2Mark2;
		}
		else{ axiom2Selected = undefined; }
	}
	scopes[1].view.onMouseUp = function(event){
		axiom2Selected = undefined;
	}



	// Axiom 3
	scopes.push( new paper.PaperScope() );
	scopes[2].setup(canvas[2])
	paperCP.push( new OrigamiPaper(scopes[2], cp[2]) );
	zoomView(scopes[2]);

	var axiom3Selected = undefined;

	var decorationLayer = new scopes[2].Layer();
	decorationLayer.activate();
	var axiom3Mark1 = new scopes[2].Shape.Circle({
		center: [0.5, 0.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom3Mark2 = new scopes[2].Shape.Circle({
		center: [0.0, 0.5], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom3Mark3 = new scopes[2].Shape.Circle({
		center: [1.0, 0.5], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom3Mark4 = new scopes[2].Shape.Circle({
		center: [0.5, 1.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var edgeA = cp[2].creaseConnectingPoints(axiom3Mark1.position, axiom3Mark2.position).mountain();
	var edgeB = cp[2].creaseConnectingPoints(axiom3Mark3.position, axiom3Mark4.position).mountain();
	cp[2].creaseEdgeToEdge(edgeA, edgeB).forEach(function(el){el.valley();});
	paperCP[2].initialize();

	// scopes[2].view.onFrame = function(event) { }
	scopes[2].view.onResize = function(event) {
		paper = scopes[2];
		zoomView(scopes[2]);
	}
	scopes[2].view.onMouseMove = function(event) {
		mousePos = event.point;
		if(axiom3Selected != undefined){
			axiom3Selected.position = mousePos;
			cp[2].clear();
			var edgeA = cp[2].creaseConnectingPoints(axiom3Mark1.position, axiom3Mark2.position).mountain();
			var edgeB = cp[2].creaseConnectingPoints(axiom3Mark3.position, axiom3Mark4.position).mountain();
			var edges = cp[2].creaseEdgeToEdge(edgeA, edgeB);
			edges.forEach(function(el){el.valley();});
			paperCP[2].initialize();
			if(edges.length >= 2){
				paperCP[2].edges[edges[1].index].strokeColor = { hue:20, saturation:0.6, brightness:1 };
			}
		}
	}
	scopes[2].view.onMouseDown = function(event){
		paper = scopes[2];
		var eps = 0.02;
		mousePos = event.point;
		if(mousePos.x - eps < axiom3Mark1.position.x && mousePos.x + eps > axiom3Mark1.position.x && 
		   mousePos.y - eps < axiom3Mark1.position.y && mousePos.y + eps > axiom3Mark1.position.y){
		   	axiom3Selected = axiom3Mark1;
		}
		else if(mousePos.x - eps < axiom3Mark2.position.x && mousePos.x + eps > axiom3Mark2.position.x && 
		        mousePos.y - eps < axiom3Mark2.position.y && mousePos.y + eps > axiom3Mark2.position.y){
		   	axiom3Selected = axiom3Mark2;
		}
		else if(mousePos.x - eps < axiom3Mark3.position.x && mousePos.x + eps > axiom3Mark3.position.x && 
		        mousePos.y - eps < axiom3Mark3.position.y && mousePos.y + eps > axiom3Mark3.position.y){
		   	axiom3Selected = axiom3Mark3;
		}
		else if(mousePos.x - eps < axiom3Mark4.position.x && mousePos.x + eps > axiom3Mark4.position.x && 
		        mousePos.y - eps < axiom3Mark4.position.y && mousePos.y + eps > axiom3Mark4.position.y){
		   	axiom3Selected = axiom3Mark4;
		}
		else{ axiom3Selected = undefined; }
	}
	scopes[2].view.onMouseUp = function(event){
		axiom3Selected = undefined;
	}


	// Axiom 4
	scopes.push( new paper.PaperScope() );
	scopes[3].setup(canvas[3])
	paperCP.push( new OrigamiPaper(scopes[3], cp[3]) );
	zoomView(scopes[3]);

	var axiom4Selected = undefined;

	var decorationLayer = new scopes[3].Layer();
	decorationLayer.activate();
	var axiom4Mark1 = new scopes[3].Shape.Circle({
		center: [0.0, 0.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom4Mark2 = new scopes[3].Shape.Circle({
		center: [0.5, 1.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom4Mark3 = new scopes[3].Shape.Circle({
		center: [0.5, 0.5], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var edge = cp[3].creaseConnectingPoints(axiom4Mark1.position, axiom4Mark2.position).mountain();
	cp[3].creasePerpendicularThroughPoint(edge, axiom4Mark3.position).valley();
	paperCP[3].initialize();

	// scopes[3].view.onFrame = function(event) { }
	scopes[3].view.onResize = function(event) {
		paper = scopes[3];
		zoomView(scopes[3]);
	}
	scopes[3].view.onMouseMove = function(event) {
		mousePos = event.point;
		if(axiom4Selected != undefined){
			axiom4Selected.position = mousePos;
			cp[3].clear();
			var edge = cp[3].creaseConnectingPoints(axiom4Mark1.position, axiom4Mark2.position).mountain();
			cp[3].creasePerpendicularThroughPoint(edge, axiom4Mark3.position).valley();
			paperCP[3].initialize();
		}
	}
	scopes[3].view.onMouseDown = function(event){
		paper = scopes[3];
		var eps = 0.02;
		mousePos = event.point;
		if(mousePos.x - eps < axiom4Mark1.position.x && mousePos.x + eps > axiom4Mark1.position.x && 
		   mousePos.y - eps < axiom4Mark1.position.y && mousePos.y + eps > axiom4Mark1.position.y){
		   	axiom4Selected = axiom4Mark1;
		}
		else if(mousePos.x - eps < axiom4Mark2.position.x && mousePos.x + eps > axiom4Mark2.position.x && 
		        mousePos.y - eps < axiom4Mark2.position.y && mousePos.y + eps > axiom4Mark2.position.y){
		   	axiom4Selected = axiom4Mark2;
		}
		else if(mousePos.x - eps < axiom4Mark3.position.x && mousePos.x + eps > axiom4Mark3.position.x && 
		        mousePos.y - eps < axiom4Mark3.position.y && mousePos.y + eps > axiom4Mark3.position.y){
		   	axiom4Selected = axiom4Mark3;
		}
		else{ axiom4Selected = undefined; }
	}
	scopes[3].view.onMouseUp = function(event){
		axiom4Selected = undefined;
	}




	// Axiom 5
	scopes.push( new paper.PaperScope() );
	scopes[4].setup(canvas[4])
	paperCP.push( new OrigamiPaper(scopes[4], cp[4]) );
	zoomView(scopes[4]);

	var axiom5Selected = undefined;

	var decorationLayer = new scopes[4].Layer();
	decorationLayer.activate();
	var axiom5Mark1 = new scopes[4].Shape.Circle({
		center: [0.0, 0.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom5Mark2 = new scopes[4].Shape.Circle({
		center: [0.5, 1.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom5Mark3 = new scopes[4].Shape.Circle({
		center: [0.33333, 0.5], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom5Mark4 = new paper.Shape.Circle({
		center: [0.66666, 0.5], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});	
	var edge = cp[4].creaseConnectingPoints(axiom5Mark1.position, axiom5Mark2.position).mountain();
	var newCreases = cp[4].creasePointToLine(axiom5Mark3.position, axiom5Mark4.position, edge);
	newCreases.forEach(function(el){ el.valley(); });
	paperCP[4].initialize();
	if(newCreases.length >= 2){
		paperCP[4].edges[ newCreases[1].index ].strokeColor = { hue:20, saturation:0.6, brightness:1 };
	}
	// algorithm helper visuals
	var radius = Math.sqrt( Math.pow(axiom5Mark4.position.x - axiom5Mark3.position.x,2) + Math.pow(axiom5Mark4.position.y - axiom5Mark3.position.y,2));
	var axiom5Markers = circleLineIntersectionAlgorithm(axiom5Mark3.position, radius, axiom5Mark1.position, axiom5Mark2.position);
	if(axiom5Markers.length >= 2){
		new paper.Shape.Circle({
			center: [axiom5Markers[0].x, axiom5Markers[0].y], radius: 0.02, strokeWidth:0.01,
			strokeColor: { hue:130, saturation:0.8, brightness:0.7 }
		});
		new paper.Shape.Circle({
			center: [axiom5Markers[1].x, axiom5Markers[1].y], radius: 0.02, strokeWidth:0.01,
			strokeColor: { hue:20, saturation:0.6, brightness:1 }
		});
	}

	// scopes[4].view.onFrame = function(event) { }
	scopes[4].view.onResize = function(event) {
		paper = scopes[4];
		zoomView(scopes[4]);
	}
	scopes[4].view.onMouseMove = function(event) {
		mousePos = event.point;
		if(axiom5Selected != undefined){
			axiom5Selected.position = mousePos;
			cp[4].clear();
			var edge = cp[4].creaseConnectingPoints(axiom5Mark1.position, axiom5Mark2.position).mountain();
			cp[4].creasePointToLine(axiom5Mark3.position, axiom5Mark4.position, edge).forEach(function(el){ el.valley(); });
			paperCP[4].initialize();
			if(newCreases.length >= 2){
				paperCP[4].edges[ newCreases[1].index ].strokeColor = { hue:20, saturation:0.6, brightness:1 };
			}
			// algorithm helper visuals
			var radius = Math.sqrt( Math.pow(axiom5Mark4.position.x - axiom5Mark3.position.x,2) + Math.pow(axiom5Mark4.position.y - axiom5Mark3.position.y,2));
			var axiom5Markers = circleLineIntersectionAlgorithm(axiom5Mark3.position, radius, axiom5Mark1.position, axiom5Mark2.position);
			if(axiom5Markers.length >= 2){
				new paper.Shape.Circle({
					center: [axiom5Markers[0].x, axiom5Markers[0].y], radius: 0.02, strokeWidth:0.01,
					strokeColor: { hue:130, saturation:0.8, brightness:0.7 }
				});
				new paper.Shape.Circle({
					center: [axiom5Markers[1].x, axiom5Markers[1].y], radius: 0.02, strokeWidth:0.01,
					strokeColor: { hue:20, saturation:0.6, brightness:1 }
				});
			}
		}
	}
	scopes[4].view.onMouseDown = function(event){
		paper = scopes[4];
		var eps = 0.02;
		mousePos = event.point;
		if(mousePos.x - eps < axiom5Mark1.position.x && mousePos.x + eps > axiom5Mark1.position.x && 
		   mousePos.y - eps < axiom5Mark1.position.y && mousePos.y + eps > axiom5Mark1.position.y){
		   	axiom5Selected = axiom5Mark1;
		}
		else if(mousePos.x - eps < axiom5Mark2.position.x && mousePos.x + eps > axiom5Mark2.position.x && 
		        mousePos.y - eps < axiom5Mark2.position.y && mousePos.y + eps > axiom5Mark2.position.y){
		   	axiom5Selected = axiom5Mark2;
		}
		else if(mousePos.x - eps < axiom5Mark3.position.x && mousePos.x + eps > axiom5Mark3.position.x && 
		        mousePos.y - eps < axiom5Mark3.position.y && mousePos.y + eps > axiom5Mark3.position.y){
		   	axiom5Selected = axiom5Mark3;
		}
		else if(mousePos.x - eps < axiom5Mark4.position.x && mousePos.x + eps > axiom5Mark4.position.x && 
		        mousePos.y - eps < axiom5Mark4.position.y && mousePos.y + eps > axiom5Mark4.position.y){
		   	axiom5Selected = axiom5Mark4;
		}
		else{ axiom5Selected = undefined; }
	}
	scopes[4].view.onMouseUp = function(event){
		axiom5Selected = undefined;
	}




	// Axiom 6
	scopes.push( new paper.PaperScope() );
	scopes[5].setup(canvas[5])
	paperCP.push( new OrigamiPaper(scopes[5], cp[5]) );




	// Axiom 7
	scopes.push( new paper.PaperScope() );
	scopes[6].setup(canvas[6])
	paperCP.push( new OrigamiPaper(scopes[6], cp[6]) );
	zoomView(scopes[6]);

	var axiom7Selected = undefined;

	var decorationLayer = new scopes[6].Layer();
	decorationLayer.activate();
	var axiom7Mark1 = new scopes[6].Shape.Circle({
		center: [0.5, 0.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom7Mark2 = new scopes[6].Shape.Circle({
		center: [1.0, 1.0], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom7Mark3 = new scopes[6].Shape.Circle({
		center: [0.0, 0.75], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom7Mark4 = new scopes[6].Shape.Circle({
		center: [1.0, 0.75], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var axiom7Mark5 = new scopes[6].Shape.Circle({
		center: [0.5, 0.5], radius: 0.02, strokeWidth:0.01,
		strokeColor: { hue:220, saturation:0.6, brightness:1 }
	});
	var crease1 = cp[6].creaseConnectingPoints(axiom7Mark1.position, axiom7Mark2.position).mountain();
	var crease2 = cp[6].creaseConnectingPoints(axiom7Mark3.position, axiom7Mark4.position).mountain();
	cp[6].creasePerpendicularPointOntoLine(axiom7Mark5.position, crease1, crease2).valley();
	paperCP[6].initialize();

	// scopes[6].view.onFrame = function(event) { }
	scopes[6].view.onResize = function(event) {
		paper = scopes[6];
		zoomView(scopes[6]);
	}
	scopes[6].view.onMouseMove = function(event) {
		mousePos = event.point;
		if(axiom7Selected != undefined){
			axiom7Selected.position = mousePos;
			cp[6].clear();
			var crease1 = cp[6].creaseConnectingPoints(axiom7Mark1.position, axiom7Mark2.position).mountain();
			var crease2 = cp[6].creaseConnectingPoints(axiom7Mark3.position, axiom7Mark4.position).mountain();
			cp[6].creasePerpendicularPointOntoLine(axiom7Mark5.position, crease1, crease2).valley();
			paperCP[6].initialize();
		}
	}
	scopes[6].view.onMouseDown = function(event){
		paper = scopes[6];
		var eps = 0.02;
		mousePos = event.point;
		if(mousePos.x - eps < axiom7Mark1.position.x && mousePos.x + eps > axiom7Mark1.position.x && 
		   mousePos.y - eps < axiom7Mark1.position.y && mousePos.y + eps > axiom7Mark1.position.y){
		   	axiom7Selected = axiom7Mark1;
		}
		else if(mousePos.x - eps < axiom7Mark2.position.x && mousePos.x + eps > axiom7Mark2.position.x && 
		        mousePos.y - eps < axiom7Mark2.position.y && mousePos.y + eps > axiom7Mark2.position.y){
		   	axiom7Selected = axiom7Mark2;
		}
		else if(mousePos.x - eps < axiom7Mark3.position.x && mousePos.x + eps > axiom7Mark3.position.x && 
		        mousePos.y - eps < axiom7Mark3.position.y && mousePos.y + eps > axiom7Mark3.position.y){
		   	axiom7Selected = axiom7Mark3;
		}
		else if(mousePos.x - eps < axiom7Mark4.position.x && mousePos.x + eps > axiom7Mark4.position.x && 
		        mousePos.y - eps < axiom7Mark4.position.y && mousePos.y + eps > axiom7Mark4.position.y){
		   	axiom7Selected = axiom7Mark4;
		}
		else if(mousePos.x - eps < axiom7Mark5.position.x && mousePos.x + eps > axiom7Mark5.position.x && 
		        mousePos.y - eps < axiom7Mark5.position.y && mousePos.y + eps > axiom7Mark5.position.y){
		   	axiom7Selected = axiom7Mark5;
		}
		else{ axiom7Selected = undefined; }
	}
	scopes[6].view.onMouseUp = function(event){
		axiom7Selected = undefined;
	}



}

</script>
</head>
<body>
<h1>Axiom 1</h1>
<h2>Given two points, we can fold a line connecting them</h2>
	<div class="center"><canvas id="canvas-axiom-1" resize></canvas></div>
<h1>Axiom 2</h1>
<h2>Given two points, we can fold point 1 onto point 2</h2>
	<div class="center"><canvas id="canvas1" resize></canvas></div>
<h1>Axiom 3</h1>
<h2>Given two lines, we can fold line 1 onto line 2</h2>
	<div class="center"><canvas id="canvas2" resize></canvas></div>
<h1>Axiom 4</h1>
<h2>Given a point and a line, we can make a fold perpendicular to the line passing through the point</h2>
	<div class="center"><canvas id="canvas3" resize></canvas></div>
<h1>Axiom 5</h1>
<h2>Given two points and a line, we can make a fold that places the first point on to the line and passes through the second point</h2>
	<div class="center"><canvas id="canvas4" resize></canvas></div>
<h1>Axiom 6</h1>
<h2>Given two points and two lines we can make a fold that places the first point onto the first line and the second point onto the second line</h2>
	<div class="center"><h1>oof. this one is hard</h1></div>
<h1>Axiom 7</h1>
<h2>Given a point and two lines we can make a fold perpendicular to the second line that places the point onto the first line</h2>
	<div class="center"><canvas id="canvas6" resize></canvas></div>



	<canvas id="canvas5" style="display:none">

</body>
</html>