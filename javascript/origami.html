<html>
<head>
	<meta charset="UTF-8">
	<script language="javascript" type="text/javascript" src="lib/p5.min.js"></script>
	<script language="javascript" type="text/javascript" src="lib/jquery-3.1.1.min.js"></script>
	<script language="javascript" type="text/javascript" src="graph.js"></script>
	<script language="javascript" type="text/javascript" src="planarGraph.js"></script>
	<script language="javascript" type="text/javascript" src="render.js"></script>
	<link href="lib/prism.css" rel="stylesheet" />
	<link href="style.css" rel="stylesheet" />
	<style>
	.p5sketch{
		margin-top:2em;
		margin-bottom:2em;
	}
	</style>

</head>
<body>
<!-- <script src="lib/prism.js"></script> -->

<div class="page">
	<p><b>Origami crease patterns</b> are</p>
	<h1><a href="https://en.wikipedia.org/wiki/Planar_graph">Planar Graphs</a></h1>
	<p>a type of <a href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)">mathematical graph</a>: a collection of creases defined by endpoints.</p>
	<div id="containerIntro" class="centered p5sketch"></div>
	<pre class="centered language-javascript"><code class="language-javascript"><span class="token keyword">var</span> graph = <span class="token keyword">new</span> PlanarGraph()
graph.<span class="token function">fishBase</span>()</code></pre>
<section id="planar-graph">
	<h1><a href="#planar-graph">Planar Graph</a></h1>
	<p>A square of paper is a unit square. length 0.0 to 1.0. origin at the corner. in computer graphics the top left corner is 0,0. in math often it's the bottom left. choose what you like. i'm not here to establish any arbitrary standards.</p>
	<h1>Generate Creases</h1>
	<p>add creases by adding their endpoints or add a crease using an existing crease for positioning.
	<div class="third p5sketch" id="divTest01"></div><div class="third p5sketch" id="divTest02"></div><div class="third p5sketch" id="divTest03"></div>
	<pre class="centered language-javascript"><code class="language-javascript"><span id="spanAddEdge1">graph.<span class="token function">addEdgeWithVertices</span>( x1, y1, x2, y2 )</span>    <span class="token comment">//(float, float, float, float)</span>
<span id="spanAddEdge2">graph.<span class="token function">addEdgeFromVertex</span>( firstNodeIndex, x, y )</span>    <span class="token comment">//(uint, float, float)</span>
<span id="spanAddEdge3">graph.<span class="token function">addEdgeFromVertex</span>( lastNodeIndex, x, y )</span>    <span class="token comment">//(uint, float, float)</span></code></pre>
</section>
<section id="intersections">
	<h1><a href="#intersections">Intersections</a></h1>
	<div class="half p5sketch" id="divTest04"></div><div class="half p5sketch" id="divTest05"></div>
	<pre class="centered language-javascript"><code class="language-javascript">graph.<span class="token function">getAllEdgeIntersections</span>()</code></pre>
	<h1>Chopping</h1>
	<div class="half p5sketch" id="divTest06"></div><div class="half p5sketch" id="divTest07"></div>
	<p class="quote">press and hold</p>
	<pre class="centered language-javascript"><code class="language-javascript">graph.<span class="token function">chopAtIntersections</span>()</code></pre>
	<p>Avoid crossing lines. Get the the X &amp; Y of the intersection:</p>
	<pre class="centered language-javascript"><code class="language-javascript">graph.<span class="token function">edgesIntersect</span>(<span class="token argument" id="spanEdgeIntersect1"> edge1</span>,<span class="token argument" id="spanEdgeIntersect2"> edge2 </span>)</code></pre>
</section>
<section id="interaction">
	<h1><a href="#interaction">Select</a></h1>
	<div class="third p5sketch" id="divTest08"></div><div class="third p5sketch" id="divTest09"></div><div class="third p5sketch" id="divTest10"></div>
	<pre class="centered language-javascript"><code class="language-javascript">graph.<span class="token function">getNearestNode</span>( <span class="token argument" id="spanNearest1MouseX">x</span>, <span class="token argument" id="spanNearest1MouseY">y</span> )
graph.<span class="token function">getNearestEdge</span>( <span class="token argument" id="spanNearest2MouseX">x</span>, <span class="token argument" id="spanNearest2MouseY">y</span> )
graph.<span class="token function">getNearestFace</span>( <span class="token argument" id="spanNearest3MouseX">x</span>, <span class="token argument" id="spanNearest3MouseY">y</span> )
</code></pre>
</section>
<section id="faces">
	<h1><a href="#faces">Find Faces</a></h1>
	<div class="centered p5sketch" id="divTest11"></div>
	<pre class="centered language-javascript"><code class="language-javascript">graph.<span class="token function">generateFaces</span>()  <span class="token comment">// from early code, finds duplicates<span></code></pre>
	<h1>Clockwise</h1>
	<div class="centered p5sketch" id="divTest10"></div>
	<pre class="centered language-javascript"><code class="language-javascript">graph.<span class="token function">getClockwiseNeighbor</span>( <span class="token argument">nodeIndex</span>, <span class="token argument">nodePrime</span> )</code></pre>
	<pre class="centered language-javascript"><code class="language-javascript">graph.<span class="token function">getClockwiseConnectedNodesSorted</span>( <span class="token argument">nodeIndex</span> )</code></pre>
</section>
</div>

<script>
	var introSketch = function(p) {
		var paperSize = 250;
		var g = new PlanarGraph();
		p.wiggle = true;
		p.reset = function(){
			g.clear();
			g.fishBase();
		}
		p.setup = function(){
			canvas = p.createCanvas(paperSize, paperSize);
			p.reset();
		}
		p.draw = function() {
			// update
		if(p.wiggle){
			var mag = 0.005;
			var speed = 0.001;
			for(var i = 0; i < g.nodes.length; i++){
				var boundary = g.nodes[i].isBoundary;
				if(boundary == undefined){
					// g.nodes[i].x += -0.0005 + 0.001 * p.noise(i*31.111+p.millis()*0.0002);
					// g.nodes[i].y += -0.0005 + 0.001 * p.noise(i*44.22+10+p.millis()*0.0002);
				} else if(boundary == 1 || boundary == 3){
					g.nodes[i].x += -mag*0.5 + mag * p.noise(i*31.111+p.millis()*speed);
				} else if(boundary == 2 || boundary == 4){
					g.nodes[i].y += -mag*0.5 + mag * p.noise(i*44.22+10+p.millis()*speed);
				}
				if(g.nodes[i].x < 0.0) g.nodes[i].x = 0.0;
				if(g.nodes[i].x > 1.0) g.nodes[i].x = 1.0;
				if(g.nodes[i].y < 0.0) g.nodes[i].y = 0.0;
				if(g.nodes[i].y > 1.0) g.nodes[i].y = 1.0;
			}
		}
			// draw
			p.clear();
			p.applyMatrix(paperSize, 0, 0, paperSize, paperSize*0.5-paperSize*0.5, paperSize*0.5-paperSize*0.5);
			p.strokeWeight(.01);
			drawCoordinateFrame(p);
			// drawGraphPoints(p, g);
			drawGraphLines(p, g);
		}
		p.mousePressed = function(){
			p.reset();
		}
	};
</script>
<script language="javascript" type="text/javascript" src="tests/03_add_nodes.js"></script>
<script language="javascript" type="text/javascript" src="tests/04_intersections.js"></script>
<script language="javascript" type="text/javascript" src="tests/05_intersection.js"></script>
<script language="javascript" type="text/javascript" src="tests/06_chop.js"></script>
<script language="javascript" type="text/javascript" src="tests/07_chop_many.js"></script>
<script language="javascript" type="text/javascript" src="tests/08_nearest_node.js"></script>
<script language="javascript" type="text/javascript" src="tests/09_nearest_edge.js"></script>
<script language="javascript" type="text/javascript" src="tests/10_nearest_face.js"></script>
<script language="javascript" type="text/javascript" src="tests/11_clockwise_nodes.js"></script>
<script language="javascript" type="text/javascript" src="tests/12_find_faces.js"></script>
<script>
	var p500 = new p5(introSketch, 'containerIntro');
	p500.wiggle = false;
	var p501 = new p5(test03, 'divTest01');
	p501.pattern = 0;
	var p502 = new p5(test03, 'divTest02');
	p502.pattern = 1;
	var p503 = new p5(test03, 'divTest03');
	p503.pattern = 2;
	var p504 = new p5(test04, 'divTest04');
	var p505 = new p5(test05, 'divTest05');
	var p506 = new p5(test06, 'divTest06');
	var p507 = new p5(test07, 'divTest07');
	var p508 = new p5(test08, 'divTest08');
	var p509 = new p5(test09, 'divTest09');
	var p510 = new p5(test10, 'divTest10');
	var p511 = new p5(test11, 'divTest11');
</script>


	<script>
		$("#spanAddEdge1").mouseenter(function(){ p501.setHighlight(true); })
		                  .mouseleave(function(){ p501.setHighlight(false); });
		$("#spanAddEdge2").mouseenter(function(){ p502.setHighlight(true); })
		                  .mouseleave(function(){ p502.setHighlight(false); });
		$("#spanAddEdge3").mouseenter(function(){ p503.setHighlight(true); })
		                  .mouseleave(function(){ p503.setHighlight(false); });
		$("#spanEdgeIntersect1").mouseenter(function(){ p506.setHighlight1(true); })
		                        .mouseleave(function(){ p506.setHighlight1(false); });
		$("#spanEdgeIntersect2").mouseenter(function(){ p506.setHighlight2(true); })
		                        .mouseleave(function(){ p506.setHighlight2(false); });

	p506.mouseMovedCallback = function(x,y){
		if(x == undefined || y == undefined){
			$("#spanNearest1MouseX").html('x');
			$("#spanNearest1MouseY").html('y');
		}else{
			$("#spanNearest1MouseX").html(x.toFixed(2));
			$("#spanNearest1MouseY").html(y.toFixed(2));
		}
	};
	p507.mouseMovedCallback = function(x,y){
		if(x == undefined || y == undefined){
			$("#spanNearest2MouseX").html('x');
			$("#spanNearest2MouseY").html('y');
		}else{
			$("#spanNearest2MouseX").html(x.toFixed(2));
			$("#spanNearest2MouseY").html(y.toFixed(2));
		}
	};
	p508.mouseMovedCallback = function(x,y){
		if(x == undefined || y == undefined){
			$("#spanNearest3MouseX").html('x');
			$("#spanNearest3MouseY").html('y');
		}else{
			$("#spanNearest3MouseX").html(x.toFixed(2));
			$("#spanNearest3MouseY").html(y.toFixed(2));
		}
	};

	</script>
	

</body>
</html>